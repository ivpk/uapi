parameters:
  - $ref: ../components/parameters/group.yaml
  - $ref: ../components/parameters/form.yaml
  - $ref: ../components/parameters/org.yaml
  - $ref: ../components/parameters/dataset.yaml
  - $ref: ../components/parameters/model.yaml
head:
  tags:
    - allObjects
  summary: Return only headers for all objects.
  responses:
    '200':
      description: OK
get:
  tags:
    - allObjects
  summary: Get multiple objects.
  description: |
    Return list of objects for a given model.
  operationId: getall
  parameters:
    - $ref: ../components/parameters/query.yaml
  responses:
    '200':
      description: OK
      content:
        application/json:
          schema:
            $ref: ../components/schemas/objects.yaml
    '400':
      $ref: ../components/responses/error400.yaml
    '500':
      $ref: ../components/responses/error500.yaml
post:
  tags:
    - allObjects
  security:
    - UAPI_test_auth:
        - write:spinta_datasets_gov_myorg_insert
    - UAPI_prod_auth:
        - write:spinta_datasets_gov_myorg_insert
  summary: >-
    Create a single new object or create, update or delete multiple objects in a
    single request.
  description: |
    ## Operation where one or multiple new objects are created.

     When multiple object are created _data is an array of new objects each listing 
     * _op as operation to be performed
     * _type as a namespace of modelname where it is to be performed
     * the new object itself in a form of {"_type" : "_value"} format. Example {"Continent" : "Europe"}

     Or

     A single object is created. New object details should be provided in a form of {"_type" : "_value"} format. Example {"Continent" : "Europe"}
  operationId: insert
  requestBody:
    required: true
    content:
      application/json:
        schema:
          oneOf:
            - $ref: ../components/schemas/multiInsert.yaml
            - $ref: ../components/schemas/insert.yaml
  responses:
    '201':
      description: Created
      content:
        application/json:
          schema:
            oneOf:
              - $ref: ../components/schemas/objects.yaml
              - $ref: ../components/schemas/object.yaml
    '400':
      $ref: ../components/responses/error400.yaml
    '403':
      $ref: ../components/responses/error403.yaml
    '500':
      $ref: ../components/responses/error500.yaml
